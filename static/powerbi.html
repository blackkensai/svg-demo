<!DOCTYPE html>

<html>

<head>

    <style>

    </style>
    <title>SVG</title>
    <meta charset="utf-8" />

    <script src="/static/jquery-3.4.1.min.js"></script>
    <script src="/static/snap.svg-min.js"></script>
</head>

<body>
    <h2 align="center">SVG</h2>

    <!-- <input id="txt1" type="text" value="sample label">
    <input id="btn1" type="button" value="click me"> -->


    <!-- <object id="svg1" type="image/svg+xml" data="/static/powerbi-scadavis-custom-visual-example1.svg" style="width: 200px; height: 400px;"></object> -->
    <div style="width:320px; height:480px;">
        <svg id="svg1" width="100%" height="100%" viewBox="0 0 1024 480" preserveAspectRatio="xMinYMin meet"></svg>
    </div>

    <script>

        // function on_btn_click() {
        //     alert('clicked ' + document.getElementById('svg1').getSVGDocument().getElementById("tspan21").firstChild.textContent)
        // }

        // function modify_text() {
        //     // svg_doc.getElementById('tspan21').firstChild.textContent = 'random num: ' + Math.random()
        //     document.getElementById('svg1').getSVGDocument().getElementById("tspan21").firstChild.textContent = 'random num: ' + Math.random()
        // }

        // document.getElementById('btn1').onclick = modify_text

        $(function () {
            var i = 0
            var svg = Snap('#svg1')
            Snap.load('http://localhost:3000/static/powerbi-scadavis-custom-visual-example1.svg', function (data) {
                console.log('Load complete')
                svg.group().append(data.select('g'))
                // $('#btn1').click(function () {
                //     // $('#svg1').get().getSVGDocument()
                //     i++
                //     var value = Math.floor(Math.random() * 500)
                //     var color = value <= 250 ? '#e1edb1' : '#edb1b1'
                //     svg.select('#text5543').attr({ text: value })
                //     svg.select('#text5547').attr({ text: $('#txt1').val() })
                //     // svg.select('#rect5539').attr({ height: value, fill: color })
                //     svg.select('#rect5539').attr({ fill: color }).animate({ height: value }, 200)
                // })
                var callback = function () {
                    i++
                    var value = Math.floor(Math.random() * 500)
                    var color = value <= 250 ? '#e1edb1' : '#edb1b1'
                    svg.select('#text5543').attr({ text: value })
                    svg.select('#text5547').attr({ text: 'value ' + i })
                    // svg.select('#rect5539').attr({ height: value, fill: color })
                    svg.select('#rect5539').attr({ fill: color }).animate({ height: value }, 500)
                }
                callback()
                setInterval(callback, 1000)
            })
        })
    </script>
</body>

</html>