<!DOCTYPE html>

<html>

<head>

    <style>

    </style>
    <title>SVG</title>
    <meta charset="utf-8" />

    <script src="/static/jquery-3.4.1.min.js"></script>
    <script src="/static/snap.svg-min.js"></script>

    <style>
        body {
            background-color: black;
        }
    </style>
</head>

<body>
    <h2 align="center">SVG</h2>

    <div style="width:320px; height:480px;">
        <svg id="svg1" width="100%" height="100%" preserveAspectRatio="xMinYMin meet"></svg>
    </div>

    <script>

        $(function () {
            var i = 0
            var svg = Snap('#svg1')
            Snap.load('/static/speedometer.svg', function (data) {
                console.log('Load complete')
                svg.group().append(data.select('g'))
                // svg.select('#text5565').click(function () {
                //     alert(`Current value is ${svg.select('#text5543').attr('text')}`)
                // })
                var callback = function () {
                    i++
                    var value = Math.floor(Math.random() * 180)
                    var color = value <= 100 ? '#fbc809' : 'red'
                    svg.select('#text_kmh').attr({ text: value + ' km/h' })
                    svg.select('#text_mph').attr({ text: (value * 0.62137119).toFixed(2) + ' MPH' })
                    // svg.select('#rect5539').attr({ height: value, fill: color })
                    svg.select('#needle').attr({ fill: color }).animate({ rotate: value }, 500)
                }
                callback()
                setInterval(callback, 1000)
            })
        })
    </script>
</body>

</html>